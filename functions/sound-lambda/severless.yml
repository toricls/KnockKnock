service: sound-lambda
provider:
  name: aws
  runtime: nodejs6.10
  stage: ${opt:stage, self:custom.defaultStage} # default stage is dev, otherwise use specified stage
  profile: ${self:custom.secrets.AWS_PROFILE}   # get aws profile from secrets file
  role: ${self:custom.secrets.ROLE_ARN}         # get role from secrets file
  deploymentBucket:
    name: serverlessconf-${self:provider.stage}
custom:
  secrets: ${file(serverless.env.yml):${self:provider.stage}}
  defaultStage: dev
functions:
  sound-lambda:
    handler: index.handler
    name: sound-lambda-${self:provider.stage}
    description: Triggers sound
    runtime: nodejs6.10
    memorySize: 128
    timeout: 10
    environment:
      ENV: ${self:custom.secrets.ENV}
